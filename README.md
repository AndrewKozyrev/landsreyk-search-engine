# landsreyk-search-engine

![image](https://user-images.githubusercontent.com/47481139/147959736-1024d05e-fd75-4124-891f-1bdda4827635.png)


Дипломный проект по разработке поискового движка для курса "Java-разработчик PRO".

### Стек используемых технологий:
- Spring Boot
- Hibernate
- MySQL
- JavaScript

![image](https://user-images.githubusercontent.com/47481139/147959702-d33951fb-5697-4ace-bb3b-a0e97be62851.png)


## Описание
Поисковый движок имеет front-end и back-end составляющие.

Первую разработали сторонние разработчики, а последнюю разрабатывал автор.

Приложение имеет ряд endpoint для выполнения разных функций.

Вот их перечень: 

## API

### 1. Запуск полной индексации — GET /api/startIndexing

Метод запускает полную индексацию всех сайтов или полную переиндексацию, если они уже проиндексированы.
Если в настоящий момент индексация или переиндексация уже запущена, метод возвращает соответствующее сообщение об ошибке. 

Параметры:

Метод без параметров

Формат ответа в случае успеха:

{
	'result': true
}

Формат ответа в случае ошибки:

{
	'result': false,
	'error': "Индексация уже запущена"
}

### 2. Остановка текущей индексации — GET /api/stopIndexing

Метод останавливает текущий процесс индексации (переиндексации). Если в настоящий момент индексация или переиндексация не происходит, метод возвращает соответствующее сообщение об ошибке. 

Параметры:

Метод без параметров.

Формат ответа в случае успеха:

{
	'result': true
}

Формат ответа в случае ошибки:

{
	'result': false,
	'error': "Индексация не запущена"
}


### 3. Добавление или обновление отдельной страницы — POST /api/indexPage

Метод добавляет в индекс или обновляет отдельную страницу, адрес которой передан в параметре.
Если адрес страницы передан неверно, метод должен вернуть соответствующую ошибку.

Параметры:

url — адрес страницы, которую нужно переиндексировать.

Формат ответа в случае успеха:

{
	'result': true
}

Формат ответа в случае ошибки:

{
	'result': false,
	'error': "Данная страница находится за пределами сайтов, 
указанных в конфигурационном файле"
}

### 4. Статистика — GET /api/statistics

Метод возвращает статистику и другую служебную информацию о состоянии поисковых индексов и самого движка.

Параметры:

Метод без параметров.

Формат ответа:

{  
&emsp;&emsp;'result': true,  
&emsp;&emsp;'statistics': {  
&emsp;&emsp;&emsp;"total": {  
&emsp;&emsp;&emsp;&emsp;"sites": 10,  
&emsp;&emsp;&emsp;&emsp;"pages": 436423,  
&emsp;&emsp;&emsp;&emsp;"lemmas": 5127891,  
&emsp;&emsp;&emsp;&emsp;"isIndexing": true  
},  
&emsp;&emsp;"detailed": [  
&emsp;{  
&emsp;&emsp;&emsp;"url": "http://www.site.com",  
&emsp;&emsp;&emsp;"name": "Имя сайта",  
&emsp;&emsp;&emsp;"status": "INDEXED",  
&emsp;&emsp;&emsp;"statusTime": 1600160357,  
&emsp;&emsp;&emsp;"error": "Ошибка индексации: главная страница сайта недоступна",  
&emsp;&emsp;&emsp;&emsp;&emsp;"pages": 5764,  
&emsp;&emsp;&emsp;&emsp;&emsp;"lemmas": 321115  
},  
...
]
}

### 5. Получение данных по поисковому запросу — GET /api/search

Метод осуществляет поиск страниц по переданному поисковому запросу (параметр query).  
Чтобы выводить результаты порционно, также можно задать параметры offset (сдвиг от начала списка результатов) и limit (количество результатов, которое необходимо вывести.  
В ответе выводится общее количество результатов (count), не зависящее от значений параметров offset и limit, и массив data с результатами поиска. Каждый результат — это объект,   содержащий свойства результата поиска (см. ниже структуру и описание каждого свойства).  
Если поисковый запрос не задан или ещё нет готового индекса (сайт, по которому ищем, или все сайты сразу не проиндексированы), метод должен вернуть соответствующую ошибку (см.   ниже пример). Тексты ошибок должны быть понятными и должны отражать суть ошибок.  

Параметры:

query — поисковый запрос;

site — сайт, по которому осуществлять поиск (если не задан, поиск должен происходить по всем проиндексированным сайтам); задаётся в формате адреса, например: http://www.site.com (без слэша в конце);

offset — сдвиг от 0 для постраничного вывода (параметр необязательный, если не установлен, то значение по умолчанию равно нулю);

limit — количество результатов, которое необходимо вывести (параметр необязательный, если не установлен, то значение по умолчанию равно 20-ти).


Формат ответа в случае успеха:

{  
&emsp;&emsp;'result': true,  
&emsp;&emsp;'count': 574,  
&emsp;&emsp;'data': [  
&emsp;&emsp;&emsp;{  
&emsp;&emsp;&emsp;&emsp;"site": "http://www.site.com",  
&emsp;&emsp;&emsp;&emsp;"siteName": "Имя сайта",  
&emsp;&emsp;&emsp;&emsp;"uri": "/path/to/page/6784",  
&emsp;&emsp;&emsp;&emsp;"title": "Заголовок страницы, которую выводим",  
&emsp;&emsp;&emsp;&emsp;"snippet": "Фрагмент текста, в котором найдены совпадения, <b>выделенные жирным</b>, в формате HTML",  
&emsp;&emsp;&emsp;&emsp;"relevance": 0.93362  
},  
...
]
}

Формат ответа в случае ошибки:

{
	'result': false,
	'error': "Задан пустой поисковый запрос"
}


Любой метод API может возвращать ошибку, если она произошла. В этом случае ответ должен выглядеть стандартным образом:

{
	'result': false,
	'error': "Указанная страница не найдена"
}

## Для запуска проекта локально

1. склонируйте проект
2. подключите библиотеки из каталога /libs к проекту
3. скачайте структуру базы данных по ссылке: https://1drv.ms/u/s!AjHH76aU3K1fhvBgC09kaIGO5LgEkQ?e=jqNbJ8
4. установите MySQL сервер и загрузите структуру базы данных на свой сервер
5. убедитесь, что при сборке проекта нет ошибок
6. запустите проект кликнув правой кнопкой мыши по src/main/java/main/Main.java, выберите 'Run Main'
7. откройте браузер и перейдите по адресу http://localhost:8080/admin
8. убедитесь, что интерфейс загрузился.
